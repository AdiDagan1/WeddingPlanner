<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>× ×™×”×•×œ ×ª×§×¦×™×‘</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="budget-container">
        <h1>× ×™×”×•×œ ×ª×§×¦×™×‘</h1>
        <div class="budget-header" id="budget-header" style="display: none;">
            <h2 id="header-budget">×¡×š ×”×ª×§×¦×™×‘: 0 ×©"×—</h2>
            <span class="edit-icon" id="edit-budget">âœï¸</span>
        </div>

        <form id="budget-form">
            <div class="form-group" id="budget-input-group">
                <label for="total-budget">×¡×š ×”×ª×§×¦×™×‘:</label>
                <input type="text" id="total-budget" placeholder="×”×–×Ÿ ××ª ×¡×š ×”×ª×§×¦×™×‘ ×©×œ×š" required>
                <button type="button" id="set-budget">×©××•×¨ ×ª×§×¦×™×‘</button>
            </div>

            <div class="form-group">
                <label for="expense-type">×¡×•×’ ×”×•×¦××”:</label>
                <select id="expense-type">
        
                        <option value="">-- ×‘×—×¨ ×¡×¤×§ --</option>
                        <option value="××•×œ×">××•×œ×</option>
                        <option value="×§×™×™×˜×¨×™× ×’">×§×™×™×˜×¨×™× ×’</option>
                        <option value="×“×™×™×’×™">×“×™×™×’×™</option>
                        <option value="×¦×œ× ×¡×˜×™×œ×¡">×¦×œ× ×¡×˜×™×œ×¡</option>
                        <option value="×¦×œ× ×•×™×“×™××•">×¦×œ× ×•×™×“×™××•</option>
                        <option value="×¦×œ× ××’× ×˜×™×">×¦×œ× ××’× ×˜×™×</option>
                        <option value="×××¤×¨×ª">×××¤×¨×ª</option>
                        <option value="×¡×™×“×•×¨ ×©×™×¢×¨">×¡×™×“×•×¨ ×©×™×¢×¨</option>
                        <option value="×”×©×›×¨×ª ×¦×™×•×“">×”×©×›×¨×ª ×¦×™×•×“</option>
                        <option value="×”×’×‘×¨×” ×•×ª××•×¨×”">×”×’×‘×¨×” ×•×ª××•×¨×”</option>
                        <option value="×¨×‘">×¨×‘</option>
                        <option value="××—×¨">××—×¨</option>
                  
                </select>
            </div>
            <div class="form-group" id="custom-expense-group" style="display: none;">
                <label for="custom-expense">×¡×•×’ ×”×•×¦××” ××•×ª××:</label>
                <input type="text" id="custom-expense" placeholder="×”×–×Ÿ ×¡×•×’ ×”×•×¦××” ×—×“×©">
            </div>
            <div class="form-group">
                <label for="expense-amount">×¡×›×•× ×”×•×¦××”:</label>
                <input type="text" id="expense-amount" placeholder="×”×–×Ÿ ××ª ×¡×›×•× ×”×”×•×¦××”" required>
            </div>
            <button type="button" id="add-expense">×”×•×¡×£ ×”×•×¦××”</button>
        </form>

        <div class="budget-summary">
            <p><strong>×¡×š ×”×ª×§×¦×™×‘:</strong> <span id="display-total">0</span> ×©"×—</p>
            <p><strong>×¡×š ×”×”×•×¦××•×ª:</strong> <span id="display-expenses">0</span> ×©"×—</p>
            <p><strong>×ª×§×¦×™×‘ × ×•×ª×¨:</strong> <span id="display-remaining">0</span> ×©"×—</p>
        </div>

        <div class="expense-list">
            <h3>×¨×©×™××ª ×”×•×¦××•×ª:</h3>
            <ul id="expense-list"></ul>
        </div>
    </div>

    <script>
        // ××©×ª× ×™×
        let totalBudget = 0;
        let totalExpenses = 0;

        // ××œ×× ×˜×™× ××”-HTML
        const totalBudgetInput = document.getElementById('total-budget');
        const setBudgetButton = document.getElementById('set-budget');
        const budgetHeader = document.getElementById('budget-header');
        const headerBudget = document.getElementById('header-budget');
        const editBudgetIcon = document.getElementById('edit-budget');

        const expenseTypeInput = document.getElementById('expense-type');
        const customExpenseGroup = document.getElementById('custom-expense-group');
        const customExpenseInput = document.getElementById('custom-expense');
        const expenseAmountInput = document.getElementById('expense-amount');
        const addExpenseButton = document.getElementById('add-expense');
        const displayTotal = document.getElementById('display-total');
        const displayExpenses = document.getElementById('display-expenses');
        const displayRemaining = document.getElementById('display-remaining');
        const expenseList = document.getElementById('expense-list');

        // ×©××™×¨×ª ×”×ª×§×¦×™×‘ ×”×¨××©×•× ×™
        setBudgetButton.addEventListener('click', () => {
            totalBudget = parseFloat(totalBudgetInput.value.replace(/,/g, '')) || 0;
            updateDisplay();
            headerBudget.textContent = `×¡×š ×”×ª×§×¦×™×‘: ${formatNumber(totalBudget)} ×©"×—`;
            budgetHeader.style.display = 'flex';
            document.getElementById('budget-input-group').style.display = 'none';
        });

        // ×¢×¨×™×›×ª ×”×ª×§×¦×™×‘
        editBudgetIcon.addEventListener('click', () => {
            document.getElementById('budget-input-group').style.display = 'block';
            totalBudgetInput.value = formatNumber(totalBudget);
        });

        // ×”×¦×’×ª ×©×“×” ×¡×•×’ ×”×•×¦××” ××•×ª×× ××™×©×™×ª
        expenseTypeInput.addEventListener('change', () => {
            if (expenseTypeInput.value === '××—×¨') {
                customExpenseGroup.style.display = 'block';
            } else {
                customExpenseGroup.style.display = 'none';
                customExpenseInput.value = '';
            }
        });

        // ×”×•×¡×¤×ª ×”×•×¦××”
        addExpenseButton.addEventListener('click', () => {
            const expenseType = expenseTypeInput.value === '××—×¨' ? customExpenseInput.value : expenseTypeInput.value;
            let expenseAmount = parseFloat(expenseAmountInput.value.replace(/,/g, '')) || 0;

            if (!expenseType || expenseAmount <= 0) {
                alert('×× × ×”×–×Ÿ ×¡×•×’ ×”×•×¦××” ×•×¡×›×•× ×ª×§×£.');
                return;
            }

            totalExpenses += expenseAmount;

            // ×”×•×¡×¤×ª ×”×•×¦××” ×œ×¨×©×™××”
            const listItem = document.createElement('li');
            listItem.innerHTML = `${expenseType} - ${formatNumber(expenseAmount)} ×©"×—
                <div class="expense-actions">
                    <span class="edit-expense">âœï¸</span>
                    <span class="delete-expense">ğŸ—‘ï¸</span>
                </div>`;

            expenseList.appendChild(listItem);

            const editButton = listItem.querySelector('.edit-expense');
            const deleteButton = listItem.querySelector('.delete-expense');

           // ×¢×¨×™×›×ª ×”×•×¦××”
editButton.addEventListener('click', () => {
    const newAmount = prompt('×¢×“×›×Ÿ ××ª ×¡×›×•× ×”×”×•×¦××”:', expenseAmount);
    if (newAmount && !isNaN(newAmount) && parseFloat(newAmount) >= 0) {
        totalExpenses -= expenseAmount;
        expenseAmount = parseFloat(newAmount);
        totalExpenses += expenseAmount;

        listItem.innerHTML = `${expenseType} - ${formatNumber(expenseAmount)} ×©"×—
            <div class="expense-actions">
                <span class="edit-expense">âœï¸</span>
                <span class="delete-expense">ğŸ—‘ï¸</span>
            </div>`;
        updateDisplay();

        // ××¦×™××ª ×”×›×¤×ª×•×¨×™× ×”×—×“×©×™×
        const newEditButton = listItem.querySelector('.edit-expense');
        const newDeleteButton = listItem.querySelector('.delete-expense');

        // ×—×™×‘×•×¨ ×××–×™× ×™× ××—×“×©
        newEditButton.addEventListener('click', () => editButton.click());
        newDeleteButton.addEventListener('click', () => {
            totalExpenses -= expenseAmount;
            if (totalExpenses < 0) totalExpenses = 0; // ×× ×™×¢×ª ×¡×›×•× ×©×œ×™×œ×™
            listItem.remove();
            updateDisplay();
        });
    }
});


            // ××—×™×§×ª ×”×•×¦××”
            deleteButton.addEventListener('click', () => {
                totalExpenses -= expenseAmount;
                if (totalExpenses < 0) totalExpenses = 0; // ×× ×™×¢×ª ×¡×›×•× ×©×œ×™×œ×™
                listItem.remove();
                updateDisplay();
            });

            expenseTypeInput.value = '';
            customExpenseInput.value = '';
            expenseAmountInput.value = '';
            customExpenseGroup.style.display = 'none';

            updateDisplay();
        });

        // ×¢×“×›×•×Ÿ ×ª×¦×•×’×”
        function updateDisplay() {
            displayTotal.textContent = formatNumber(totalBudget);
            displayExpenses.textContent = formatNumber(totalExpenses);
            displayRemaining.textContent = formatNumber(totalBudget - totalExpenses);
        }

        // ×”×•×¡×¤×ª ×¤×™×¡×•×§ ×‘×©×“×” ×”×§×œ×˜ ×‘×–××Ÿ ×”×–× ×”
        totalBudgetInput.addEventListener('input', () => {
            totalBudgetInput.value = formatInput(totalBudgetInput.value);
        });

        expenseAmountInput.addEventListener('input', () => {
            expenseAmountInput.value = formatInput(expenseAmountInput.value);
        });

        // ×¤×•× ×§×¦×™×•×ª ×œ×¤×•×¨××˜ ××¡×¤×¨×™×
        function formatNumber(number) {
            return number.toLocaleString('he-IL');
        }

        function formatInput(value) {
            return value.replace(/,/g, '').replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        }
    </script>
</body>
</html>
